// MODELO DE DATOS - SISTEMA FARMACIA MARIBEL
// Ve a https://dbdiagram.io y pega este codigo

Table usuarios {
  id varchar [pk, note: 'UUID']
  username varchar [unique, not null, note: 'Nombre de usuario']
  email varchar [unique, not null, note: 'Correo electronico']
  password_hash varchar [not null, note: 'Contrasena encriptada']
  role varchar [not null, note: 'administrador, vendedor, consulta']
  full_name varchar [not null, note: 'Nombre completo']
  active boolean [default: true, note: 'Estado activo']
  created_at datetime [note: 'Fecha de creacion']
}

Table categorias {
  id varchar [pk, note: 'UUID']
  name varchar [not null, note: 'Nombre de categoria']
  description varchar [not null, note: 'Descripcion']
  created_at datetime [note: 'Fecha de creacion']
}

Table proveedores {
  id varchar [pk, note: 'UUID']
  name varchar [not null, note: 'Nombre del proveedor']
  contact_person varchar [not null, note: 'Persona de contacto']
  phone varchar [not null, note: 'Telefono']
  email varchar [not null, note: 'Correo electronico']
  address varchar [not null, note: 'Direccion']
  created_at datetime [note: 'Fecha de registro']
}

Table productos {
  id varchar [pk, note: 'UUID']
  name varchar [not null, note: 'Nombre del producto']
  description varchar [not null, note: 'Descripcion']
  category_id varchar [ref: > categorias.id, note: 'FK Categoria']
  supplier_id varchar [ref: > proveedores.id, note: 'FK Proveedor']
  price float [not null, note: 'Precio de venta C$']
  cost float [not null, note: 'Costo C$']
  stock int [not null, note: 'Cantidad en inventario']
  min_stock int [default: 10, note: 'Stock minimo']
  expiration_date datetime [note: 'Fecha de vencimiento']
  barcode varchar [note: 'Codigo de barras']
  active boolean [default: true, note: 'Producto activo']
  created_at datetime [note: 'Fecha de registro']
}

Table clientes {
  id varchar [pk, note: 'UUID']
  name varchar [not null, note: 'Nombre completo']
  phone varchar [not null, note: 'Telefono']
  email varchar [note: 'Correo opcional']
  address varchar [note: 'Direccion opcional']
  created_at datetime [note: 'Fecha de registro']
}

Table ventas {
  id varchar [pk, note: 'UUID de venta']
  customer_id varchar [ref: > clientes.id, note: 'FK Cliente']
  customer_name varchar [not null, note: 'Nombre del cliente']
  user_id varchar [ref: > usuarios.id, note: 'FK Vendedor']
  user_name varchar [not null, note: 'Nombre del vendedor']
  subtotal float [not null, note: 'Subtotal']
  tax float [default: 0, note: 'Impuesto']
  discount float [default: 0, note: 'Descuento']
  total float [not null, note: 'Total C$']
  payment_method varchar [not null, note: 'efectivo, tarjeta, transferencia']
  created_at datetime [note: 'Fecha de venta']
}

Table detalle_venta {
  id varchar [pk, note: 'UUID']
  sale_id varchar [ref: > ventas.id, not null, note: 'FK Venta']
  product_id varchar [ref: > productos.id, not null, note: 'FK Producto']
  product_name varchar [not null, note: 'Nombre del producto']
  quantity int [not null, note: 'Cantidad vendida']
  unit_price float [not null, note: 'Precio unitario C$']
  subtotal float [not null, note: 'Subtotal del item']
}

Table movimientos_inventario {
  id varchar [pk, note: 'UUID']
  product_id varchar [ref: > productos.id, not null, note: 'FK Producto']
  product_name varchar [not null, note: 'Nombre del producto']
  movement_type varchar [not null, note: 'entrada, salida, ajuste']
  quantity int [not null, note: 'Cantidad']
  reason varchar [not null, note: 'Motivo']
  user_id varchar [ref: > usuarios.id, not null, note: 'FK Usuario']
  user_name varchar [not null, note: 'Nombre del usuario']
  created_at datetime [note: 'Fecha del movimiento']
}

Table roles {
  id varchar [pk, note: 'ID del rol']
  name varchar [not null, note: 'Nombre del rol']
  description varchar [note: 'Descripcion']
  permissions varchar [note: 'Permisos']
}

Ref: usuarios.role > roles.id
